---
sidebar: true
title: Org mode
weight: 1
output:
  blogdown::html_page:
    toc: true
---

I'm giving [Org mode](https://orgmode.org/) a try.
This page will contain my configuration and the small subset of commands that I want to learn.

[Org Manual](https://orgmode.org/manual/)

## Org file

- Start with `MY PROJECTS    -*- mode: org; -*-`

## Configuration

In `.emacs` file:

~~~lisp
(require 'org)
;; Change M-TAB completion to C-TAB
(define-key org-mode-map (kbd "C-<tab>") 'pcomplete)
(setq org-todo-keywords
      '((sequence "TODO" "ONGOING" "WAITING" "|" "DONE")))
(global-set-key (kbd "C-c a") 'org-agenda)
(setq org-startup-truncated nil) ;; wrap lines
(setq org-startup-indented 1) ;; heading indentation
(setq org-return-follows-link 1) ;; RET to follow links
;; path to org files
(custom-set-variables
 '(org-directory "path/to/org/dir")
 '(org-agenda-files (list org-directory)))
;; capture
(setq org-default-notes-file (concat org-directory "/notes.org"))
(global-set-key (kbd "C-c c") 'org-capture)
~~~

## Syntax

- `*bold*`, `/italic/`, `_underlined_`, `+strike-through+`.
- `=verbatim=`, `~code~`. 

## Keybindings

### From anywhere

- Capture a note: bound to `C-c c`
- Open agenda views: bound to `C-c a`.

### Edit mode

- Completion: changed to `C-tab`.
- Move to next/previous heading: `C-c C-n`/`C-c C-p`.
- Move to next/previous same-level heading: `C-c C-f`/`C-c C-b`.
- Move up to higher heading: `C-c C-u`.
- Insert a new heading at the end of the current subtree: `C-RET`.
- Promote/demote heading: `M-LEFT`/`M-RIGHT`.
- Promote/demote subtree: `M-S-LEFT`/`M-S-RIGHT`.
- Move subtree up/down: `M-UP`/`M-DOWN`.
- Cycle through TODO states: `S-RIGHT`/`S-LEFT`.
- Toggle the sparse tree view: `C-c /`.
- Open link: `C-c C-o`.
- New/edit link: `C-c C-l`.

### Timestamps

- Insert/edit date: `C-c .`
- Insert/edit schedule: `C-c C-s`.
- Insert/edit deadline: `C-c C-d`.
- Navigate with `S-ARROW`.
- Toggle the calendar at a specific date: `C-c >`.
- Insert selected date in the calendar at cursor position: `C-c <`.
- In calendar, jump to specific date: `o`.

### Agenda views

- Add/remove document to agenda files: `C-c [`/`C-c ]`.
- Highlight in file: `SPC`.
- Jump to file: `TAB`.
- Jump to file and close agenda: `RET`.
- Change TODO states with `t`.
- Jump to a specific date: `j`.
- Previous/next day/week/month: `b`/`f`

### Capture

- Finish capture and go back to current buffer: `C-c C-c`.

## TODO entry

~~~
*** TODO Do this before the deadline
    SCHEDULED: <2004-02-22 Sun>
    DEADLINE: <2004-02-29 Sun>
~~~

## Habits entry

~~~
** TODO Go for a run
SCHEDULED: <2019-07-16 Tue .+2d/7d>
- State "DONE"       from "WAITING"    [2019-07-14 Sun 14:13] 
:PROPERTIES: 
:STYLE:    habit
:LAST_REPEAT: [2019-07-14 Sun 14:13]
:END:
~~~

## Links

`[[LINK][DESCRIPTION]]`

With *LINK*:

- `http://jmonlong.github.io/Hippocamplus/`
- `file:path/to/file`
- `file:sometextfile::NNN` file with line number.
- `file:projects.org::*task title` Org file with heading search.
- `doi:XX.XXXX/XXX`

## Tags

- Set/edit tag: `C-c C-q`

## Custom agenda views

I either want to know the tasks and events for the day, or just the events for the upcoming week/year.

- (c) Today's agenda and un-scheduled tasks.
- (w) Events for the upcoming week.
- (y) Events for the upcoming year (recurrent events and birthdays excluded).

~~~lisp
(setq org-agenda-custom-commands
      '(("c" "Today's agenda"
         ((agenda "" ((org-agenda-ndays 1)))
          (alltodo ""
                   ((org-agenda-skip-function
                     (lambda nil
                       (org-agenda-skip-entry-if (quote scheduled)
                                                 (quote deadline))))
                    (org-agenda-overriding-header "Un-scheduled tasks:")
                    )))
         ((org-agenda-compact-blocks t))
         )
        ("w" "Week's events"
         ((agenda "" ((org-agenda-ndays 7)
                      (org-agenda-skip-function
                       '(or (org-agenda-skip-entry-if 'todo '("TODO" "ONGOING" "DONE"))
                            )
                       )
                      (org-agenda-show-all-dates nil)
                      (org-agenda-overriding-header "Week's events:")
                      )))
          ((org-agenda-compact-blocks t))
          )
        ("y" "Year's events (no recurrents)"
         ((agenda "" ((org-agenda-ndays 365)
                      (org-agenda-skip-function
                       '(or (org-agenda-skip-entry-if 'todo '("TODO" "ONGOING" "DONE"))
                            (org-agenda-skip-subtree-if 'regexp ":recurrent:")
                            (org-agenda-skip-subtree-if 'regexp ":birthday:")
                            )
                       )
                      (org-agenda-show-all-dates nil)
                      (org-agenda-overriding-header "Year's events (no recurrents):")
                      )))
          ((org-agenda-compact-blocks t))
          )
        )
      )
~~~
